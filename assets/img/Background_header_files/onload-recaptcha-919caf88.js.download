(window.webpackJsonp=window.webpackJsonp||[]).push([["660f"],{Q2fT:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={defaultProps:{schema:"com.airbnb.jitney.event.logging.Recaptcha:RecaptchaClientGeneratedTokenEvent:3.0.0",event_name:"recaptcha_client_generated_token"},propTypes:{},fullyQualifiedName:"Recaptcha.v3.RecaptchaClientGeneratedTokenEvent"}},ZRHH:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));class o extends Error{}},mVwX:function(e,t,n){"use strict";n.r(t),n.d(t,"loadGrecaptcha",(function(){return h})),n.d(t,"getRecaptchaV3TokenHeader",(function(){return b}));var o=n("I9Za"),r=n.n(o),c=n("v+iD"),a=n("Ri7V"),i=n("Q2fT"),s=n("g8Fj");var u=n("ZRHH");function d(){const e=`.grecaptcha-badge { visibility: hidden; ${document.body.classList.contains("hide-recaptcha-from-voice-over")?"z-index: -10;":""} }`,t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n);const o=n.sheet?n.sheet:null;o&&o.insertRule?o.insertRule(e,0):n.innerText=(n.innerText||"")+e}function h(){const e="CN"===r.a.country()?"www.recaptcha.net":"www.google.com",t=a.a.getBootstrap("google_recaptcha_v3_web_logging")?"&logging=true":"";Object(c.a)(`https://${e}/recaptcha/api.js?render=6LflNKsUAAAAAJZAn48kK7mF-KMioLD3aLZm0thD${t}`).then(d)}function m(e){return new Promise(t=>setTimeout(t,e))}function l(e,t){return()=>{throw new u.a(`Timeout: ${e} exceeded ${t}ms`)}}function p(e){if(void 0===window.grecaptcha){return m(50).then(()=>p(e))}return e.loadedTs=Date.now(),Promise.resolve()}function f(e){return new Promise(t=>{window.grecaptcha.ready(()=>{e.readyTs=Date.now(),t()})})}function g(e){const{action:t}=e;return window.grecaptcha.execute("6LflNKsUAAAAAJZAn48kK7mF-KMioLD3aLZm0thD",{action:t}).then(t=>{if("string"!=typeof t||!t.length)throw new u.a("window.grecaptcha failed to generate token");e.executedTs=Date.now(),e.token=t})}function w(e){const{startTs:t,loadedTs:n}=e;return"number"==typeof n?n-t:-1}function T(e){const{loadedTs:t,readyTs:n}=e;return"number"!=typeof t?-1:"number"==typeof n?n-t:-1}function y(e){const{readyTs:t,executedTs:n}=e;return"number"!=typeof t?-1:"number"==typeof n?n-t:-1}function v(e){const{action:t,err:n,token:o}=e;return function({action:e,success:t,loadTime:n,readyTime:o,execTime:r,length:c,error:a}){const u=Object.assign({action:e,success:t,load_time:n,ready_time:o,execution_time:r,error:a},void 0===c?{}:{length:c});s.a.logJitneyEvent({schema:i.a,event_data:u})}({action:t,success:void 0===n,loadTime:w(e),readyTime:T(e),execTime:y(e),length:"string"==typeof o?o.length:void 0,error:n})}function A(e,t){return t-(Date.now()-e)}function b({action:e,timeoutInMs:t=1e4,shouldThrow:n=!1,maxRetries:o=0}){return function(e,t){const n=Date.now(),o={startTs:n,action:e};return Promise.race([p(o),m(A(n,t)).then(l("completeGrecaptchaLoad",t))]).then(()=>Promise.race([f(o),m(A(n,t)).then(l("prepareGrecaptcha",t))])).then(()=>Promise.race([g(o),m(A(n,t)).then(l("generateToken",t))])).then(()=>(v(o),""+o.token)).catch(e=>{throw v(Object.assign({},o,{err:String(e)})),e})}(e,t).then(e=>({"X-AIRBNB-RECAPTCHA-TOKEN":e})).catch(r=>{if(0===o){if(n)throw r;return Promise.resolve({"X-AIRBNB-RECAPTCHA-TOKEN":""})}return b({action:e,timeoutInMs:1.5*t,shouldThrow:n,maxRetries:o-1})})}},"v+iD":function(e,t,n){"use strict";function o(e){return new Promise((t,n)=>{const o=document.createElement("script");o.type="text/javascript",o.async=!0,o.onload=t,o.onerror=n,o.src=e,(document.head||document.getElementsByTagName("head")[0]).appendChild(o)})}n.d(t,"a",(function(){return o}))}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/onload-recaptcha-27bb7d5f.js.map