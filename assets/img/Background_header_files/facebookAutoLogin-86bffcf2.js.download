(window.webpackJsonp=window.webpackJsonp||[]).push([["2a16"],{"Ss7+":function(t,e,o){"use strict";o.r(e),o.d(e,"FACEBOOK_ACTION_TYPE",(function(){return O})),o.d(e,"default",(function(){return h}));var n=o("tl9J"),r=o.n(n),a=o("8dvS"),i=o.n(a),c=o("OtDV"),s=o("wr5J"),u=o("qJkm"),d=o("ANar"),f=o("64m5"),_=o("EqMp"),b=o("yuvK"),l=o("2jR3"),k=o("VXjN");o.d(e,"autologinEnabled",(function(){return k.a}));var p=o("xAPW");o.d(e,"hasDismissedFacebookPrompt",(function(){return p.a}));const O={NO_AUTOLOGIN_AND_PROMPT:0,SHOW_FACEBOOK_PROMPT:1,FACEBOOK_AUTO_LOGIN:2};function g(){r()("nofbautologin",!0)}function h(){const t=Object(b.a)();t&&(Object(d.a)("facebook.js.get_login_status.started"),Object(b.b)().then(e=>{const o="unknown"!==(null==e?void 0:e.status)?e.status:null;if(i()("fbs",o,{path:"/"}),i()("fb_logout"))Object(b.g)().then(()=>{i()("fblo_"+t.appId,null,{domain:void 0,path:"/"})}).catch(t=>{const e=new Error(t.message);Object(l.a)(e,{originalError:t})}),i()("fb_logout",null,{domain:Object(f.b)(),path:"/"}),g(),Object(d.a)("facebook.js.get_login_status.logout");else{if(Object(d.a)("facebook.js.get_login_status.response",1,["status:"+e.status,"is_logged_in:"+u.a.isLoggedIn(),"auto_login:"+Object(k.a)()]),/fb_action_ids=/.test(document.location.search)&&c.default.post("/users/detect_fb_session"),u.a.isLoggedIn())return;if("not_authorized"!==e.status&&"authorization_expired"!==e.status||Object(b.c)().then(t=>{const o=/^\d+$/.test(t);Object(d.a)("facebook.js.not_authorized.get_fb_user_id",1,["has_fb_user_id:"+o,"authorization_expired:"+("authorization_expired"===e.status)])}).catch(t=>{const e=new Error(t.message);Object(l.a)(e,{originalError:t})}),"connected"===e.status&&!Object(p.a)()){const t={check_linked_airbnb_account:!0};c.default.post("/users/facebook_auto_login",t).then(t=>{if(t.has_linked_airbnb_account)(e=t.facebook_action)===O.SHOW_FACEBOOK_PROMPT?s.default.emit("initializeFacebookPrompt"):e===O.FACEBOOK_AUTO_LOGIN&&Object(k.a)()&&(Object(d.a)("facebook_auto_login.attempt"),c.default.post("/users/facebook_auto_login").then(t=>{t.success?Object(_.e)():g()}));else{const t=6048e5;r()("facebook_prompt_dismissed_p3",!0,{expires:t}),r()("facebook_prompt_dismissed",!0,{expires:t}),g()}var e})}}}).catch(t=>{const e=new Error(t.message);Object(l.a)(e,{originalError:t})}))}},"v+iD":function(t,e,o){"use strict";function n(t){return new Promise((e,o)=>{const n=document.createElement("script");n.type="text/javascript",n.async=!0,n.onload=e,n.onerror=o,n.src=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)})}o.d(e,"a",(function(){return n}))},yuvK:function(t,e,o){"use strict";o.d(e,"a",(function(){return d.a})),o.d(e,"e",(function(){return l})),o.d(e,"d",(function(){return p})),o.d(e,"b",(function(){return O})),o.d(e,"i",(function(){return g})),o.d(e,"h",(function(){return h})),o.d(e,"f",(function(){return m})),o.d(e,"g",(function(){return w})),o.d(e,"c",(function(){return j}));var n=o("ilXw"),r=o.n(n),a=o("I9Za"),i=o.n(a),c=o("v+iD");var s=o("IhWC"),u=o("ANar"),d=o("VMDH"),f=o("PuV7"),_=o("Ri7V");const b=[];function l(){var t;return!(null===(t=window)||void 0===t||!t.FB)}function k(){const t=r.a.get("facebook-init");return document.querySelector(`script[src="${t.sdkUrl}"]`)||(window.fbAsyncInit=()=>function(t){for(window.FB.init({appId:t,status:!0,cookie:!0,oauth:!0,version:"v6.0"});b.length>0;)b[0](window.FB),b.shift()}(t.appId),window.Airbnb&&(window.Airbnb.FACEBOOK_PERMS=t.scope),Object(c.a)(t.sdkUrl)),function(t,e){const o=new Promise((t,o)=>{setTimeout(()=>o(new Error(`Timeout after ${e}ms`)),e)});return Promise.race([t,o])}(new Promise(t=>b.push(t)),1e4).catch(()=>{throw Object(u.a)("facebook_sdk_init_timeout"),new Error("FB SDK init timeout")})}function p(){const t=r.a.get("facebook-init");if(null==t||!t.enabled)return Promise.reject(new Error("Facebook SDK isn't supported on this page"));if(l())return Promise.resolve(window.FB);const e=i.a.tld_country();return _.a.getBootstrap("facebook_sdk_default_off_country_toggle")?new Promise((t,o)=>{Object(s.a)("facebook.com",n=>{!n&&(!!["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO","GB","CH"].includes(i.a.tld_country())||_.a.getBootstrap("facebook_sdk_default_off_global_force")||_.a.getBootstrap("facebook_sdk_default_off_global")&&f.a.deliverExperiment("facebook_sdk_default_off_global",{control:()=>!1,treatment:()=>!0,treatment_unknown:()=>!1}))?(Object(u.a)("facebook_sdk.cookie_check",1,["country:"+e,"sdk_disabled:true"]),o(new Error("Facebook SDK isn't supported on this page because you have opted out of Facebook third party cookies."))):(Object(u.a)("facebook_sdk.cookie_check",1,["country:"+e,"sdk_disabled:false"]),k().then(e=>t(e)))})}):(Object(u.a)("facebook_sdk.no_cookie_check",1,["country:"+e]),k())}function O(){return p().then(t=>new Promise(e=>t.getLoginStatus(e)))}function g(t){return p().then(e=>new Promise(o=>e.ui(t,o)))}function h(t){return p().then(e=>(e.XFBML&&e.XFBML.parse(t),Promise.resolve()))}function m(t){return p().then(e=>new Promise(o=>e.login(o,t)))}function w(){return p().then(t=>new Promise(e=>t.logout(e)))}function j(){return p().then(t=>t.getUserID())}}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/facebookAutoLogin-7cfa73f7.js.map