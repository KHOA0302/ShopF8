(window.webpackJsonp=window.webpackJsonp||[]).push([["66bc"],{VbSF:function(e,t,i){"use strict";var s=i("q1tI"),n=i.n(s),o=i("fHbK"),l=i("PGlZ"),a=i("j0ku"),r=i("YEIt"),d=i("hwnc"),h=i("2jR3"),c=i("hlFt"),p=i("cQGw"),u=i("DdVn"),g=i("Ri7V"),m=i("DE9g"),I=i("Cr4H"),S=i("acAX"),f=i("XGtj"),b=i("ZFm/"),v=i("4Y7s"),w=i("UupV");const x=Object(d.a)("Carousel");function y(e,t){const i=t,s=e;return Object.keys(i).map(e=>{if(s[e]!==i[e])return{key:e,from:s[e],to:i[e]}}).filter(Boolean)}class C extends n.a.Component{constructor(e){super(e),this.state={hasInteracted:!(!Object(p.a)()||!this.props.isFirstCarouselInGroup),isApplyingPeekBounce:!1,isScrollable:!this.props.applyCompositingOptimizations||this.props.selectedIndex>0||!(!Object(p.a)()||!this.props.isFirstCarouselInGroup),selectedIndex:this.props.selectedIndex,shouldApplyRTLFix:!!this.props.applyRTLFix,isSnapRTLLikeLTR:!1},this.carouselVisibleTimeout=0,this.carouselVisibleController=void 0,this.toggleScrollableRafId=void 0,this.slideRefs=new Map,this.slideStateManager=new w.b({hasInteractedWith:!this.props.applyCompositingOptimizations||!(!Object(p.a)()||!this.props.isFirstCarouselInGroup),preloadCount:this.props.preloadCount,selectedIndex:this.props.selectedIndex,totalSlides:this.props.items.length}),this.listRef=null,this.rootRef=null,this.waitingForIndexToBeFullyVisible=void 0,this.fireOnChangeWhenSlideFullyVisible=void 0,this.effectiveSpaceBetweenItems=void 0,this.scrollSlideIntoView=(e,{smooth:t}={})=>{this.waitingForIndexToBeFullyVisible=e;const i=this.slideRefs.get(e);if(i&&this.listRef){const s=this.listRef.getBoundingClientRect().width,n=s-i.getBoundingClientRect().width,o=this.shouldDisplayMultipleItems()?Math.round(n/2):0,l=Object(f.c)(this.listRef,i,this.props.direction,this.effectiveSpaceBetweenItems?Math.floor(parseInt(this.effectiveSpaceBetweenItems,10)):void 0);this.listRef.scrollTo({left:l,behavior:this.shouldUseSmoothScrolling(e,t)?"smooth":"auto"}),x(()=>`slide ${e} is scrolling into view at: ${i.offsetLeft-o}, totalWidth of: ${s}`)}},this.gotoNextSlide=()=>{const{selectedIndex:e}=this.state,{items:t,rewindOnBoundaries:i}=this.props,s=e>=t.length-1;!s||i?(this.fireOnChangeWhenSlideFullyVisible=!0,this.scrollSlideIntoView(s?0:e+1,{smooth:!0})):x(()=>"rewinding the carousel to the first slide disabled. don't change item.")},this.gotoPreviousSlide=()=>{const{selectedIndex:e}=this.state,{items:t,rewindOnBoundaries:i}=this.props,s=e<=0;!s||i?(this.fireOnChangeWhenSlideFullyVisible=!0,this.scrollSlideIntoView(s?t.length-1:e-1,{smooth:!0})):x(()=>"rewinding the carousel to the last slide disabled. don't change item.")},this.determineSpaceBetweenItems=(e=this.props.spaceBetweenItems)=>{if(!e)return"0px";return e.includes("px")?String(Math.floor(parseInt(e,10)/2))+"px":String(Math.floor(parseInt(e,10)/2))+"%"},this.shouldDisplayMultipleItems=()=>{const{width:e}=this.props;return null!=e&&"100%"!==e},this.shouldUseSmoothScrolling=(e,t)=>{const{smoothScrolling:i,items:s}=this.props;if(!t)return!1;const{selectedIndex:n}=this.state;if("always"===i)return!Object(r.a)();const o=Math.abs(n-e);return(1===o||o===s.length-1)&&"adjacent"===i},this.setIsInteracting=()=>{const{onInteracted:e,preloadCount:t}=this.props,{hasInteracted:i,isScrollable:s}=this.state;if(void 0!==t&&!i){const t=Object(p.a)();x(()=>"interaction detected, this will only fire once per instance."),this.slideStateManager.setHasInteractedWith(!0),this.setState({hasInteracted:!0,isScrollable:!!t||s}),c.d.postTask(()=>{null==e||e()},{priority:"background"})}},this.handleAnimationEnd=()=>{this.setState({isApplyingPeekBounce:!1})},this.handleCarouselVisible=e=>{const{applyCompositingOptimizations:t,preloadCount:i}=this.props;if(!t)return;const s=Object(p.a)(),n=()=>{const{hasInteracted:t,isScrollable:s}=this.state;s!==e&&(x(()=>[`visibility changed to: ${e}, updating compositing optimizations`]),this.toggleScrollableRafId=requestAnimationFrame(()=>{this.setState({isScrollable:e})})),e&&void 0===i&&!t&&(this.slideStateManager.setHasInteractedWith(!0),this.setState({hasInteracted:!0}))};var o,l;Object(u.a)()||s?(null===(o=this.carouselVisibleController)||void 0===o||o.abort(),this.carouselVisibleController=Object(c.a)("user-visible"),c.d.postTask(n,{signal:null===(l=this.carouselVisibleController)||void 0===l?void 0:l.signal,delay:500}).catch(c.b)):(clearTimeout(this.carouselVisibleTimeout),this.carouselVisibleTimeout=window.setTimeout(()=>{requestAnimationFrame(n)},350))},this.handleSlideFullyVisible=(e,t)=>{if(!t||!e||void 0===this.waitingForIndexToBeFullyVisible)return;const i=t.target.getAttribute("data-key");if(!i)return;const s=this.getSlideDataForKey(i);if(s&&this.waitingForIndexToBeFullyVisible===s.index&&(this.waitingForIndexToBeFullyVisible=void 0,this.setState({selectedIndex:s.index}),x(()=>`slide ${s.index} is now fully in view`),this.fireOnChangeWhenSlideFullyVisible)){this.fireOnChangeWhenSlideFullyVisible=!1;const{onSlideChanged:e}=this.props;if(!e)return;requestAnimationFrame(()=>{requestAnimationFrame(()=>{const{selectedIndex:t}=this.state;t===s.index?e(s):x(()=>`skipping "${s.index}" as "${t}" is selected now.`)})})}},this.handleSlideVisible=(e,t)=>{if(!t||!e||void 0!==this.waitingForIndexToBeFullyVisible)return;const i=t.target.getAttribute("data-key");i?this.fireOnSlideChanged(i):Object(h.a)(new Error("Could not find a valid key for target"))},this.handleKeyDown=e=>{const{selectedIndex:t}=this.state,{items:i}=this.props;let s=t;switch(e.key){case"d":case"ArrowRight":s=this.getNextIndex();break;case"a":case"ArrowLeft":s=this.getPreviousIndex();break;case"Home":s=0;break;case"End":s=i.length-1;break;default:return}if(s!==t){if(this.shouldPreventNextChange(s))return void x(()=>"rewinding the carousel to the first/last slide disabled. don't change item.");x(()=>`going to slide ${s} from "${e.key}" press`),e.preventDefault(),this.fireOnChangeWhenSlideFullyVisible=!0,this.scrollSlideIntoView(s,{smooth:!0})}},this.dispatchSlideChanged=async e=>{const{selectedIndex:t}=this.state;if(t!==e.index)return void x(()=>`skipping "${e.index}" as "${t}" is selected now.`);const{onSlideChanged:i}=this.props,s=Object(p.a)();var n;Object(u.a)()||s?c.d.postTask(()=>null==i?void 0:i(e),{priority:"user-visible",signal:null===(n=this.carouselVisibleController)||void 0===n?void 0:n.signal}).catch(c.b):null==i||i(e)},this.fireOnSlideChanged=e=>{const t=this.getSlideDataForKey(e);if(!t)return;const{selectedIndex:i}=this.state;if(i!==t.index){x(()=>"setting selected index to: "+t.index);const e=Object(p.a)();var s;if(Object(u.a)()||e)c.d.postTask(()=>{this.setState({selectedIndex:t.index}),this.dispatchSlideChanged(t)},{priority:"user-visible",signal:null===(s=this.carouselVisibleController)||void 0===s?void 0:s.signal}).catch(c.b);else this.setState({selectedIndex:t.index},()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>this.dispatchSlideChanged(t))})})}},this.getSlideDataForKey=e=>{const{items:t}=this.props,i=t.find(t=>String(Object(b.a)(t))===e);if(void 0!==i)return{item:i,index:t.indexOf(i)};x(()=>["could not find item for: "+e,t])},this.setRootRef=e=>{this.rootRef=e},this.setListRef=e=>{const t=e&&e.node;this.listRef=t},this.setSlideRef=e=>{if(e){const t=e.getAttribute("data-key");if(t){const i=this.getSlideDataForKey(t);if(!i)return;this.slideRefs.set(i.index,e)}}},this.effectiveSpaceBetweenItems=this.determineSpaceBetweenItems(),this.carouselVisibleController=Object(c.a)("user-visible")}componentWillUnmount(){var e;null===(e=this.carouselVisibleController)||void 0===e||e.abort(),this.toggleScrollableRafId&&(cancelAnimationFrame(this.toggleScrollableRafId),this.toggleScrollableRafId=void 0)}componentDidMount(){const{applyPeekBouncing:e,selectedIndex:t,applyRTLFix:i}=this.props;e&&this.setState({isApplyingPeekBounce:!0});const s=i||void 0===i&&(Object(S.h)()||Object(S.p)());s!==!!i&&this.setState({shouldApplyRTLFix:s});const n=Object(S.g)();n&&this.setState({isSnapRTLLikeLTR:n}),t>0&&Promise.resolve().then(()=>{const{selectedIndex:e}=this.props;t===e&&(x(()=>`scrolling slide ${t} into view on mount`),this.scrollSlideIntoView(t))})}shouldComponentUpdate(e,t){const{items:i,preloadCount:s,render:n,renderControls:o,selectedIndex:l,shouldPreloadImmediately:a,width:r}=this.props,{hasInteracted:d,selectedIndex:h}=this.state,{items:c,render:u,renderControls:g,selectedIndex:m,shouldPreloadImmediately:I,preloadCount:S,width:f}=e,{selectedIndex:b}=t,v=c.length;return i!==c?(x(()=>["items are updating, resetting preload state",i,c]),this.slideStateManager.reset({preloadCount:S,selectedIndex:m,totalSlides:v}),!0):l!==m?(this.slideStateManager.setSelectedIndex(m),!0):o!==g||(n!==u||(r!==f||(!(a===I||Object(p.a)()&&d)||(s!==S&&this.slideStateManager.setPreloadCount(S),h!==b&&this.slideStateManager.setSelectedIndex(b),this.state!==t))))}componentDidUpdate(e,t){const{selectedIndex:i}=e,{props:s,state:n}=this,{selectedIndex:o,alignCenter:l}=s,{selectedIndex:a}=n;e!==s&&x(()=>["The carousel props just updated.",{prevProps:e,props:s,changes:y(e,s)}]),t!==n&&x(()=>["The carousel state just updated.",{prevState:t,state:n,changes:y(t,n)}]),i!==o&&a!==o?(this.fireOnChangeWhenSlideFullyVisible=!0,this.scrollSlideIntoView(o,{smooth:void 0!==i})):!l&&i!==o&&this.shouldDisplayMultipleItems()&&this.scrollSlideIntoView(o,{smooth:void 0!==i})}UNSAFE_componentWillReceiveProps({applyPeekBouncing:e,spaceBetweenItems:t,shouldPreloadImmediately:i}){const{applyPeekBouncing:s,spaceBetweenItems:n,shouldPreloadImmediately:o}=this.props;!s&&e&&this.setState({isApplyingPeekBounce:!0}),n!==t&&(this.effectiveSpaceBetweenItems=this.determineSpaceBetweenItems(t)),!o&&i&&this.setIsInteracting()}render(){const{hasInteracted:e,isApplyingPeekBounce:t,isScrollable:i,selectedIndex:s,shouldApplyRTLFix:a,isSnapRTLLikeLTR:r}=this.state,{alignCenter:d,"aria-label":h,applyCompositingOptimizations:c,borderRadius:u,css:S,direction:f,hideScrollbar:w,leftGutterSpace:x,items:y,isFirstCarouselInGroup:C,render:R,renderControls:F,rightGutterSpace:O,spaceBetweenItems:V,styles:B,supportKeyboardEvents:T,width:k,useContentVisibilityOptimizations:j}=this.props,A=null!=j?j:g.a.getBootstrap("enable_carousel_contentvisibility"),P=c&&void 0===this.waitingForIndexToBeFullyVisible&&!i,L={marginLeft:"-"+this.effectiveSpaceBetweenItems,marginRight:"-"+this.effectiveSpaceBetweenItems},E=V?`0px ${this.effectiveSpaceBetweenItems} 0px ${this.effectiveSpaceBetweenItems}`:void 0,M="string"==typeof k?k:"0",D=x||(100-Number.parseInt(M,10))/2+"%",$=!!x||d,N=O||(100-Number.parseInt(M,10))/2+"%",W=!!O||d,G=Object(p.a)(),_=0===s,K=n.a.createElement(l.a,Object.assign({"aria-label":h,as:"ul",initialInView:!(!G||!C)||void 0,threshold:G?.7:.5,onChange:this.handleCarouselVisible,onMouseEnter:this.setIsInteracting,onTouchStart:G?void 0:this.setIsInteracting,onScroll:!e&&G?this.setIsInteracting:void 0,ref:this.setListRef},S(B.outerCarouselContainer,_&&B.outerCarouselContainer_overflowClip,a&&f===o.DIRECTIONS.RTL&&B.disableScrollSnap,w&&B.container_iosAdjustmentChild,P&&!_&&B.container_preventScrolling,P&&_&&B.container_preventScrolling_overflowClip,L,x&&{scrollPadding:x})),$&&n.a.createElement("div",{style:{flex:"0 0 "+D},"aria-hidden":"true"}),T&&n.a.createElement(m.a,{target:"document",type:"keydown",onEvent:this.handleKeyDown}),y.map((e,o)=>{const l=Object(b.a)(e);return n.a.createElement(v.a,{alignCenter:d,ariaHidden:s!==o&&!this.shouldDisplayMultipleItems(),css:S,enabled:!A||i,initialInView:C,item:e,isApplyingPeekBounce:t,key:l,onAnimationEnd:this.handleAnimationEnd,onChange:this.handleSlideVisible,onFullyVisible:this.handleSlideFullyVisible,ref:this.setSlideRef,render:R,rootMargin:E,rootRef:this.rootRef,slideIndex:o,slideState:this.slideStateManager.getStateForSlide(o),spaceBetweenItems:this.effectiveSpaceBetweenItems,styles:B,width:k,direction:f,isSnapRTLLikeLTR:r})}),W&&n.a.createElement("div",{style:{flex:"0 0 "+N},"aria-hidden":"true"}));let q=K;if(w&&(q=n.a.createElement("div",S(B.container_iosAdjustmentParent),K)),F){const e=y.length,t=0===s,i=s===e-1;return n.a.createElement("div",Object.assign({},S(B.controlsContainer),{ref:this.setRootRef}),n.a.createElement(I.a,{when:!!u,wrapper:n.a.createElement("div",S({borderRadius:u,overflow:"hidden"}))},q),F({isFirstSlideSelected:t,isLastSlideSelected:i,selectedIndex:s,total:e,gotoNextSlide:this.gotoNextSlide,gotoPreviousSlide:this.gotoPreviousSlide}))}return n.a.createElement(I.a,{when:!!u,wrapper:n.a.createElement("div",S({borderRadius:u,overflow:"hidden"}))},q)}shouldPreventNextChange(e){const{rewindOnBoundaries:t,items:i}=this.props,{selectedIndex:s}=this.state,n=Math.abs(s-e)===i.length-1;return!t&&n}getNextIndex(){const{selectedIndex:e}=this.state,{direction:t,items:i}=this.props;let s=e;return t===o.DIRECTIONS.RTL?(s-=1,s<0&&(s=i.length-1)):(s+=1,s>i.length-1&&(s=0)),s}getPreviousIndex(){const{selectedIndex:e}=this.state,{direction:t,items:i}=this.props;let s=e;return t===o.DIRECTIONS.RTL?(s+=1,s>i.length-1&&(s=0)):(s-=1,s<0&&(s=i.length-1)),s}}C.defaultProps={rewindOnBoundaries:!0,items:[],render:e=>e,selectedIndex:0,smoothScrolling:"adjacent"},t.a=Object(a.a)("Carousel",["onSlideChanged"])(C)}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/66bc-8901aec0.js.map