(window.webpackJsonp=window.webpackJsonp||[]).push([["1ed2"],{"/ykl":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var r=i("ilXw"),n=i.n(r);function s(){return n.a.get("china-guest-loop")}},F52i:function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s}));const r="FMP-target",n="hydrate-meaningful-element",s="hydrate-performance-hoc"},ImBj:function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return d}));var r=i("8dvS"),n=i.n(r),s=i("ilXw"),o=i.n(s),a=i("Q/Zp"),c=i("/ykl"),l=i("lVss");function h(){return function(){const{navigator:t}=window;return void 0===t?Promise.resolve(!1):"serviceWorker"in t&&t.serviceWorker.getRegistration?t.serviceWorker.getRegistration("/").then(t=>!(!t||!t.active)).catch(()=>!1):Promise.resolve(!1)}().then(e=>{if(!e)return!1;const i=t.window&&Object(l.b)();if(!i||!i.getEntriesByType)return!1;const r=i.getEntriesByType("navigation");if(!r||0===r.length)return!1;const n=r[0].serverTiming;return!(!n||0===n.length)&&n.filter(t=>"serviceWorker"===t.name).length>0}).catch(()=>!1)}let u;function d(t){return h().then(e=>t?Promise.resolve(2):e?Promise.resolve(4):1===u?Promise.resolve(5):Promise.resolve(1))}(function(){if(Object(c.a)())return;const t=n()("cache_state"),{pathname:e}=document.location;let i=e.lastIndexOf("/");for(;-1!==i;){const t=e.slice(0,i);n()("cache_state",-1,{expires:-1,domain:Object(a.a)(),path:t+"/"}),i=t.lastIndexOf("/")}if("0"===t)u=2;else if("1"===t)u=1;else{const t=Date.now(),{tracking_context:e=null}=o.a.get("layout-init")||{};if(e&&e.action&&e.action.includes("app_shell"))return;const i=o.a.get("pageGeneratedAt")||t;u=t-i>6e5?1:3}})()}).call(this,i("yLpj"))},"Q/Zp":function(t,e,i){"use strict";function r(){const{hostname:t}=window.location,e=t.split("."),i=e.length,r=["airbnb","airbnbchina","luxuryretreats","airbnb-dev"];for(let t=0;t<r.length;t+=1){const n=e.indexOf(r[t]);if(n>=0)return"."+e.slice(n,i).join(".")}return t}i.d(e,"a",(function(){return r}))},lVss:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"a",(function(){return o})),i.d(e,"c",(function(){return a}));var r=i("IzZ0");function n(){const t={now:()=>Date.now(),mark(){},measure(){},getEntriesByName:()=>[],getEntriesByType:()=>[],clearMarks(){},clearMeasures(){},timeOrigin:0,timing:{connectEnd:0,connectStart:0,domComplete:0,domContentLoadedEventEnd:0,domContentLoadedEventStart:0,domInteractive:0,domLoading:0,domainLookupEnd:0,domainLookupStart:0,fetchStart:0,loadEventEnd:0,loadEventStart:0,navigationStart:0,redirectEnd:0,redirectStart:0,requestStart:0,responseEnd:0,responseStart:0,secureConnectionStart:0,unloadEventEnd:0,unloadEventStart:0,toJSON(){}},isMocked:!0},e=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||void 0;if(void 0!==e){const i=e.now||e.mozNow||e.msNow||e.webkitNow;return i&&(e.now||(e.now=i)),Object.keys(t).forEach(i=>{i in e||"function"!=typeof t[i]||(e[i]=t[i])}),e}return t}const s={0:2,1:4,2:1},o=n();function a(){var t;const e=n();if(e.getEntriesByType){const t=e.getEntriesByType("navigation")[0];if(t)return r.a[t.type]}return"number"==typeof(null==e||null===(t=e.navigation)||void 0===t?void 0:t.type)&&s[e.navigation.type]||5}},lqUL:function(t,e,i){"use strict";var r=i("Y195"),n=i("g8Fj"),s=i("ANar"),o=i("acAX"),a=i("lVss"),c=i("jt0Q"),l=i("hlFt"),h=i("ilXw"),u=i.n(h),d=i("6Tiy");var m=i("ImBj");function p(t,e){const{longTasks:i}=t,{start:r,end:n}=e;return i.filter(t=>t.startTime>=r&&(!n||t.startTime<n)).sort((t,e)=>t.startTime-e.startTime).map((t,e)=>({entry:t,index:e}))}function g(t){return t.reduce((t,e)=>t+e.entry.duration-50,0)}function f(t,e){return g(p(t,e))}function _(t){if(0!==t.length)return t.reduce((t,e)=>e.entry.duration>t.entry.duration?e:t,t[0])}function b(t){const{ttfcp:e=0}=t;return _(p(t,{start:e}))}function v(t){if(t)return t.entry.duration-50}var y=i("Ri7V"),T=i("GD2B");function M({duration:t,encodedBodySize:e,name:i,transferSize:r}){if(!t||t<=0)return;if(!e||e<=0)return;const n=function(t){if(P.test(t))return"ImageManager";if(O.test(t)&&!w.test(t))return"LegacyAkamai";return"Unknown"}(i);if("Unknown"===n)return;const s="ImageManager"===n?k(i,/im_w=(\w+)/):function(t){return k(t,/aki_policy=(\w+)/)}(i);return{image_cache_type:0===r?1:0,image_size_bytes:e,image_download_time_ms:Math.floor(t),image_policy:s,image_url:i}}const P=/(?:im_w|im_q)/,O=/aki_policy=/,w=/im\/pictures\/user/;function k(t,e){if(!t)return;const i=t.match(e);return i?i[1]:void 0}const I={transfer_size:0,encodedbody_size:0,decodedbody_size:0,count:0,cache_hit_ratio:0};function S({resources:t,universalPageName:e}){var i,r,s,o,a;if(0===t.length||t.length>0&&void 0===t[0].decodedBodySize)return;const c=["link","img","css","script","other"],l=[{type:"css",initiatorList:["link"],regex:/^.+(muscache|localhost).+\.css(\?.*)?$/},{type:"img",initiatorList:["img","css","link"],regex:/^.+(muscache|localhost).+(jpg|jpeg|png|gif|webp)(\?.*)?$/},{type:"js",category:"airbnb",initiatorList:["link","script"],regex:/^.+(muscache|localhost).+\.m?(js|bundle)(\?.*)?$/},{type:"js",category:"third_party",initiatorList:["link","script"],regex:/^((?!(muscache|localhost)).)*\.m?js(\?.*)?$/},{type:"font",initiatorList:["link","css","other"],regex:/^.+(muscache|localhost).+\.woff2(\?.*)?$/}],h={css:Object.assign({},I),js:{airbnb:Object.assign({},I),third_party:Object.assign({},I)},img:Object.assign({},I),font:Object.assign({},I)},u=[],d=y.a.getBootstrap("instrument_search_results_images");var m,p;(t.filter(({initiatorType:t})=>c.includes(t)).forEach(({duration:t,name:i,initiatorType:r,decodedBodySize:n,transferSize:s,encodedBodySize:o})=>{l.find(({type:a,initiatorList:c,regex:l,category:m})=>{if(c.includes(r)&&i.match(l)){const r=m?h[a][m]:h[a];if(d&&"img"===a&&2e3===e&&Math.random()<=.001){const e=M({duration:t,encodedBodySize:o,name:i,transferSize:s});e&&u.push(e)}const c=r.count*r.cache_hit_ratio+(0===s?1:0);return r.count+=1,r.cache_hit_ratio=c?c/r.count:0,r.transfer_size+=s,r.encodedbody_size+=o,r.decodedbody_size+=n,!0}return!1})}),h.css=null!==(i=h.css)&&void 0!==i&&i.count?h.css:void 0,null!==(r=h.js)&&void 0!==r&&null!==(s=r.airbnb)&&void 0!==s&&s.count)?0===(null===(m=h.js)||void 0===m||null===(p=m.third_party)||void 0===p?void 0:p.count)&&(h.js.third_party.cache_hit_ratio=1):h.js=void 0;return h.img=null!==(o=h.img)&&void 0!==o&&o.count?h.img:void 0,h.font=null!==(a=h.font)&&void 0!==a&&a.count?h.font:void 0,d&&u.length&&u.forEach(t=>{n.a.logJitneyEvent({schema:T.a,event_data:t})}),Object.values(h).find(t=>!!t)?h:void 0}var E=i("F52i"),D=i("oIG1");const R=new Set(["click","input","keypress"]);class C{constructor({isDirectRequest:t,pageCreatedAt:e}){this.networkInformation=function(){if(window.navigator&&window.navigator.connection){const{connection:t}=window.navigator;return{effective_type:t.effectiveType,rtt:t.rtt,downlink:t.downlink}}}(),this.initialVisibilityState=function(){switch(document.visibilityState){case"visible":return 1;case"hidden":return 2;case"prerender":return 3;default:return 4}}(),this.isDirectRequest=void 0,this.isClientSideRequest=void 0,this.performance=Object(a.b)(),this.createdAt=void 0,this.pageRequestMethod=1,this.domainAndPath=`${window.location.host}${window.location.pathname}`,this.throttleableMetrics={longTasks:[],interactivitySpans:[],interactivitySpanAggregations:{}},this.unthrottleableMetrics={assets:{},longInputDelays:[],longInputDelayCounts:[],numberOfLongInputDelays:0,timedInteractions:[],totalDurationOfLongInputDelays:0,resources:[]},this.longTaskObserver=void 0,this.inputDelayObserver=void 0,this.timedInteractionObserver=void 0,this.resourcesObserver=void 0,this.clsObserver=void 0,this.lcpObserver=void 0,this.retired=!1,this.universalPageName=void 0,this.impressionUuid=void 0,this.eventData=void 0,this.eventDataSchema=void 0,this.showLogs="string"==typeof Object(d.a)().pps,this.retire=()=>{this.retired||(this.retired=!0,this.cleanUpLongTasks(),this.cleanupLongInputDelayObserver(),this.cleanupTimedInteractionObserver(),this.cleanUpResources(),this.cleanUpClsObserver(),this.cleanUpLcpObserver(),this.throttleableMetrics.recorderDuration=this.performance.now()-this.createdAt,this.throttleableMetrics.timeToHydrate=this.calculateTimeToHydrate(),this.hasNecessaryPolyfills()&&window.perfMetrics.stopSearchingForFirstMeaningfulPaint())},this.getDataProblems=()=>{const{ttfcp:t}=this.throttleableMetrics,e=[];return t&&t<0&&e.push("ttfcp-negative"),t&&t>6e4&&e.push("ttfcp-exceeds-60s"),e},this.gatherUnthrottleableMetrics=()=>{this.listenForResources(),this.listenForCLS(),this.listenForLongInputDelays(),this.listenForTimedInteractions()},this.gatherThrottleableMetrics=()=>{this.listenForFCP(),this.listenForFMP(),this.listenForFID(),this.listenForLongTasks(),this.listenForLCP(),this.throttleableMetrics.webPerformanceTiming=Object.assign({},{www_cdn_provider:u.a.get("wwwCdnProvider")||"Unknown"},this.isDirectRequest&&function(){if(window.performance&&window.performance.timing){const{navigationStart:t,redirectStart:e,redirectEnd:i,fetchStart:r,domainLookupStart:n,domainLookupEnd:s,connectStart:o,connectEnd:a,secureConnectionStart:c,requestStart:l,responseStart:h,responseEnd:u,domLoading:d,domInteractive:m,domContentLoadedEventStart:p,domContentLoadedEventEnd:g,domComplete:f,loadEventStart:_,loadEventEnd:b}=window.performance.timing;return{navigation_start_timestamp_in_ms:t,time_to_redirect_start_in_ms:e,time_to_redirect_end_in_ms:i,time_to_fetch_start_in_ms:r,time_to_domain_lookup_start_in_ms:n,time_to_domain_lookup_end_in_ms:s,time_to_connect_start_in_ms:o,time_to_connect_end_in_ms:a,time_to_secure_connection_start_in_ms:c,time_to_request_start_in_ms:l,time_to_response_start_in_ms:h,time_to_response_end_in_ms:u,time_to_dom_loading_in_ms:d,time_to_dom_interactive_in_ms:m,time_to_dom_content_loaded_event_start_in_ms:p,time_to_dom_content_loaded_event_end_in_ms:g,time_to_dom_complete_in_ms:f,time_to_load_event_start_in_ms:_,time_to_load_event_end_in_ms:b}}}())},this.isRecordingLoggable=()=>void 0!==this.throttleableMetrics.ttfcp,this.listenForFCP=()=>{this.isClientSideRequest||window.perfMetrics.onFirstContentfulPaint(this.setTTFCP)},this.setTTFCP=t=>{this.retired||this.throttleableMetrics.ttfcp||(this.throttleableMetrics.ttfcp=t-this.createdAt,this.isClientSideRequest&&(this.performance.mark("TTFCP_END"),this.performance.measure("TTFCP","CSR_PAGE_START","TTFCP_END")),this.showLogs&&this.consoleLogMetrics())},this.listenForFMP=()=>{this.retired||(this.isClientSideRequest&&window.perfMetrics.startSearchingForFirstMeaningfulPaint(),window.perfMetrics.onFirstMeaningfulPaint(this.setTTFMP))},this.setTTFMP=t=>{this.retired||(this.throttleableMetrics.ttfmp=t-this.createdAt,this.isClientSideRequest&&(this.performance.mark("TTFMP_END"),this.performance.measure("TTFMP","CSR_PAGE_START","TTFMP_END")),this.showLogs&&this.consoleLogMetrics())},this.listenForFID=()=>{window.perfMetrics.clearFirstInputDelay(),window.perfMetrics.onFirstInputDelay(this.setFID)},this.setFID=(t,e)=>{if(this.retired)return;this.throttleableMetrics.fid=t;const i=e.timeStamp-this.createdAt;i>=0&&(this.throttleableMetrics.timeToFid=i),this.showLogs&&this.consoleLogMetrics()},this.listenForTimedInteractions=()=>{if(this.supportsPerformanceObserverWithType("element")){this.cleanupTimedInteractionObserver(),this.timedInteractionObserver=new PerformanceObserver(t=>{C.lastInputDelayEvent&&(t.getEntries().forEach(t=>{this.recordTimedInteraction(t)}),C.lastInputDelayEvent=void 0)});try{this.timedInteractionObserver.observe({type:"element",buffered:this.isDirectRequest})}catch(t){}}},this.recordTimedInteraction=t=>{const e=C.lastInputDelayEvent;if(!e)return;const{element:i,identifier:r,name:n,renderTime:s}=t,o={element_type:"image-paint"===n?"image":"text",identifier_type:r,previous_target_ancestor_section_id:e.target_ancestor_section_id,start_time:e.start_time,target_ancestor_section_id:this.findAncestorSectionId(i),total_time:Math.round(s-e.start_time)};this.unthrottleableMetrics.timedInteractions.push(o)},this.cleanupTimedInteractionObserver=()=>{if(!this.timedInteractionObserver)return;"function"==typeof this.timedInteractionObserver.takeRecords&&this.timedInteractionObserver.takeRecords();const{timedInteractions:t}=this.unthrottleableMetrics;this.unthrottleableMetrics.timedInteractions=t.slice(0,20),this.timedInteractionObserver.disconnect()},this.listenForLongInputDelays=()=>{if(this.supportsPerformanceObserverWithType("event")){this.inputDelayObserver=new PerformanceObserver(t=>{let e;t.getEntries().forEach(t=>{this.recordLongInputDelay(t),R.has(t.name)&&(e=t)}),e&&(C.lastInputDelayEvent=this.createLongInputRecord(e))});try{this.inputDelayObserver.observe({type:"event",buffered:this.isDirectRequest})}catch(t){}}},this.createLongInputRecord=t=>{const{duration:e,name:i,processingEnd:r,processingStart:n,startTime:s,target:o}=t,a=n-s;return{input_delay:Math.round(a),input_duration:e,event_type:i,start_time:Math.round(s),target_ancestor_section_id:this.findAncestorSectionId(o),total_time:Math.round(r-s)}},this.recordLongInputDelay=t=>{const{name:e,processingStart:i,startTime:r}=t;if(!R.has(e))return;if(i-r<100)return;const n=this.createLongInputRecord(t);this.unthrottleableMetrics.longInputDelays.push(n)},this.cleanupLongInputDelayObserver=()=>{if(!this.inputDelayObserver)return;"function"==typeof this.inputDelayObserver.takeRecords&&this.inputDelayObserver.takeRecords();let t=0;const e=new Map;this.unthrottleableMetrics.longInputDelays.forEach(({event_type:i,total_time:r})=>{t+=r;let n=e.get(i);n||(n={event_count:0,total_duration:0,event_name:i},e.set(i,n)),n.event_count+=1,n.total_duration+=r}),this.unthrottleableMetrics.longInputDelayCounts=Array.from(e.values()),this.unthrottleableMetrics.numberOfLongInputDelays=this.unthrottleableMetrics.longInputDelays.length,this.unthrottleableMetrics.totalDurationOfLongInputDelays=t,this.unthrottleableMetrics.longInputDelays=this.unthrottleableMetrics.longInputDelays.sort((t,e)=>e.total_time-t.total_time).slice(0,20),this.inputDelayObserver.disconnect()},this.listenForLongTasks=()=>{if(this.supportsPerformanceObserverWithType("longtask"))try{this.longTaskObserver=new PerformanceObserver(t=>{this.throttleableMetrics.longTasks.push(...t.getEntries())}),this.longTaskObserver.observe({type:"longtask",buffered:this.isDirectRequest})}catch(t){}},this.cleanUpLongTasks=()=>{this.longTaskObserver&&("function"==typeof this.longTaskObserver.takeRecords&&this.throttleableMetrics.longTasks.push(...this.longTaskObserver.takeRecords()),this.throttleableMetrics.totalBlockingTime=function(t){const{ttfcp:e=0}=t;return f(t,{start:e})}(this.throttleableMetrics),this.throttleableMetrics.longestBlockingTime=v(b(this.throttleableMetrics)),this.throttleableMetrics.longestBlockingTaskIndex=function(t){var e;return null===(e=b(t))||void 0===e?void 0:e.index}(this.throttleableMetrics),this.throttleableMetrics.tbtPreHydrate=function(t,e){const{ttfcp:i=0}=t;if(void 0!==e)return f(t,{start:i,end:e})}(this.throttleableMetrics,this.calculateTimeToHydrate()),this.throttleableMetrics.tbtPostHydrate=function(t,e){const{ttfcp:i=0}=t;if(void 0!==e)return f(t,{start:Math.max(e,i)})}(this.throttleableMetrics,this.calculateTimeToHydrate()),this.throttleableMetrics.numberOfBlockingTasks=this.throttleableMetrics.longTasks.length,Object(D.d)()&&(this.throttleableMetrics.interactivitySpans=Object(D.f)({start:this.createdAt,end:this.performance.now()}).map(t=>Object.assign({name:t.name,duration:t.end-t.start},function(t,e){const i=p(t,e);return{longTaskDurations:i.map(t=>t.entry.duration),totalBlockingTime:g(i),numberOfBlockingTasks:i.length,longestBlockingTime:v(_(i))}}(this.throttleableMetrics,t))),this.throttleableMetrics.interactivitySpanAggregations=Object(D.b)(this.throttleableMetrics.interactivitySpans)),this.longTaskObserver.disconnect())},this.calculateTimeToHydrate=()=>{const t=[...this.performance.getEntriesByName(E.c),...this.performance.getEntriesByName(E.b)].filter(t=>t.startTime>this.createdAt);if(0!==t.length)return t.reduce((t,e)=>t.startTime<e.startTime?t:e,t[0]).startTime-this.createdAt},this.listenForCLS=()=>{if(this.supportsPerformanceObserverWithType("layout-shift"))try{this.clsObserver=new PerformanceObserver(this.clsObserverCallback),this.unthrottleableMetrics.cumulativeLayoutShift=0,this.clsObserver.observe({type:"layout-shift",buffered:this.isDirectRequest})}catch(t){}},this.clsObserverCallback=t=>{t.getEntries().forEach(t=>{t.hadRecentInput||(this.unthrottleableMetrics.cumulativeLayoutShift=this.unthrottleableMetrics.cumulativeLayoutShift||0,this.unthrottleableMetrics.cumulativeLayoutShift+=t.value,this.showLogs&&this.consoleLogMetrics())})},this.cleanUpClsObserver=()=>{this.clsObserver&&("function"==typeof this.clsObserver.takeRecords&&this.clsObserver.takeRecords(),this.clsObserver.disconnect())},this.listenForResources=()=>{if(this.supportsPerformanceObserverWithType("resource"))try{this.resourcesObserver=new PerformanceObserver(t=>{this.unthrottleableMetrics.resources.push(...t.getEntries())}),this.resourcesObserver.observe({type:"resource",buffered:this.isDirectRequest})}catch(t){}},this.cleanUpResources=()=>{this.resourcesObserver&&("function"==typeof this.resourcesObserver.takeRecords&&this.unthrottleableMetrics.resources.push(...this.resourcesObserver.takeRecords()),this.unthrottleableMetrics.assets=S({resources:this.unthrottleableMetrics.resources,universalPageName:this.universalPageName}),this.resourcesObserver.disconnect())},this.listenForLCP=()=>{if(!this.isClientSideRequest&&this.supportsPerformanceObserverWithType("largest-contentful-paint"))try{this.lcpObserver=new PerformanceObserver(t=>{t.getEntries().forEach(this.updateLCP)}),this.lcpObserver.observe({type:"largest-contentful-paint",buffered:!0})}catch(t){}},this.updateLCP=t=>{this.throttleableMetrics.lcp=t.startTime},this.cleanUpLcpObserver=()=>{this.lcpObserver&&("function"==typeof this.lcpObserver.takeRecords&&this.lcpObserver.takeRecords().forEach(this.updateLCP),this.lcpObserver.disconnect())},this.supportsPerformanceObserverWithType=t=>"undefined"!=typeof PerformanceObserver&&(!!PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(t)),this.findAncestorSectionId=t=>{let e=null,i=t;for(;null===e&&i;)e=i.getAttribute("data-section-id")||i.getAttribute("data-testid"),i=i.parentElement;return e||void 0},this.hasNecessaryPolyfills=()=>!!window.perfMetrics,this.consoleLogMetrics=()=>{const{ttfcp:t,ttfmp:e,fid:i}=this.throttleableMetrics,{cumulativeLayoutShift:r}=this.unthrottleableMetrics;console.log(`Page Performance Score metrics (air.bb/web-pps)\n\nPathname = %c${window.location.pathname}%c\n  Time To First Contentful Paint      = ${this.prettyMetric(t)}\n  Time To First Meaningful Paint      = ${this.prettyMetric(e)}\n  First Input Delay                   = ${this.prettyMetric(i)}\n  Cumulative Layout Shift             = ${this.prettyMetric(r,!0)}\n  Long Input Delays                   = ${this.prettyMetric(this.unthrottleableMetrics.numberOfLongInputDelays)}\n  Total Long Input Delay Duration     = ${this.prettyMetric(this.unthrottleableMetrics.totalDurationOfLongInputDelays)}\n  Total Blocking Time                 = (see air.bb/web-pps-tbt)`,"font-weight: bold;","")},this.prettyMetric=(t,e)=>{let i;return i=e?"number"==typeof t?""+t.toFixed(2):"n/a":t?Math.round(t).toLocaleString()+" ms":"...",i.padStart(9," ")},this.isDirectRequest=t,this.isClientSideRequest=!t,t?this.createdAt=0:(this.performance.mark("CSR_PAGE_START"),this.createdAt=e||this.performance.now()),Object(m.a)(this.isClientSideRequest).then(t=>{this.pageRequestMethod=t}),this.isClientSideRequest?this.unthrottleableMetrics.documentAge=0:u.a.get("pageGeneratedAt")&&(this.unthrottleableMetrics.documentAge=Math.max(Date.now()-u.a.get("pageGeneratedAt"),0)),this.gatherUnthrottleableMetrics(),2!==this.initialVisibilityState&&this.hasNecessaryPolyfills()&&this.gatherThrottleableMetrics()}}C.lastInputDelayEvent=void 0;e.a=new class{constructor({trackingModule:t}){this.trackingModule=void 0,this.performanceRecorders=[],this.ignorePathnameUpdate=void 0,this.includeHistoryUpdate=void 0,this.nextPageCreatedAt=void 0,this.pauseInfo={pauseStart:0,pauseDuration:0,pausePending:!1},this.currentPathname="",this.currentSearch="",this.updateCurrentRecorderWithHOCProps=t=>{const e=this.performanceRecorders[this.performanceRecorders.length-1];e&&(e.universalPageName=t.universalPageName,e.impressionUuid=t.impressionUuid,e.eventData=t.eventData,e.eventDataSchema=t.eventDataSchema,e.isDirectRequest||e.setTTFCP(t.timestampOfFCP))},this.handleNewHistory=t=>{t.listen(this.onHistoryChange)},this.setIgnorePathnameUpdate=t=>{this.ignorePathnameUpdate=t},this.clearIgnorePathnameUpdate=()=>{this.ignorePathnameUpdate=void 0},this.setIncludeHistoryUpdate=t=>{this.includeHistoryUpdate=t},this.clearIncludeHistoryUpdate=()=>{this.includeHistoryUpdate=void 0},this.startNextPageTimer=()=>{this.nextPageCreatedAt=Object(a.b)().now(),this.pauseInfo.pausePending=!1,this.pauseInfo.pauseStart=0,this.pauseInfo.pauseDuration=0},this.pauseNextPageTimer=()=>{this.pauseInfo.pausePending=!0,this.pauseInfo.pauseStart=Object(a.b)().now()},this.resumeNextPageTimer=()=>{this.pauseInfo.pausePending?(this.pauseInfo.pausePending=!1,this.pauseInfo.pauseDuration+=Object(a.b)().now()-this.pauseInfo.pauseStart,this.pauseInfo.pauseStart=0):Object(s.a)("page_transition_coordinator.page_timer.error",1,["error:pause","pathname:"+window.location.pathname])},this.createNewRecorder=({isDirectRequest:t})=>{const e=this.performanceRecorders[this.performanceRecorders.length-1];e&&(Object(c.c)()?l.d.postTask(()=>e.retire(),{priority:"background"}):e.retire());const i=this.getNextPageCreatedAt();this.performanceRecorders.push(new C({isDirectRequest:t,pageCreatedAt:i}))},this.getNextPageCreatedAt=()=>{let t;return this.nextPageCreatedAt&&this.pauseInfo.pauseDuration?t=this.nextPageCreatedAt+this.pauseInfo.pauseDuration:this.pauseInfo.pausePending?(Object(s.a)("page_transition_coordinator.page_timer.error",1,["error:resume","pathname:"+window.location.pathname]),t=this.nextPageCreatedAt):this.nextPageCreatedAt&&(t=this.nextPageCreatedAt),this.nextPageCreatedAt=void 0,t},this.onHistoryChange=(t,e)=>{const i=t.pathname,r=t.search;this.isPageTransition({action:e,prevPathname:this.currentPathname,prevSearch:this.currentSearch,nextPathname:i,nextSearch:r})&&(this.flushAllEvents(),this.createNewRecorder({isDirectRequest:!1})),this.currentPathname=i,this.currentSearch=r},this.isPageTransition=t=>{if("function"==typeof this.includeHistoryUpdate)return this.includeHistoryUpdate(t);const{action:e,prevPathname:i,nextPathname:r}=t;return!(!i||!r)&&(i!==r&&(("function"!=typeof this.ignorePathnameUpdate||!this.ignorePathnameUpdate(i,r))&&["POP","PUSH","REPLACE"].includes(e)))},this.flushAllEvents=()=>{var t;Object(o.e)()||(this.performanceRecorders.forEach(t=>{var e;if(t.retired||t.retire(),!t.isRecordingLoggable())return;const i=t.getDataProblems();if(i.length>0)return void Object(s.a)("page_transition_coordinator.data.error",1,["error:data-problems","pathname:"+window.location.pathname,...i.map(t=>"problem:"+t)]);let n={};Object(D.d)()&&(n={interactivity_spans:t.throttleableMetrics.interactivitySpans.map(t=>({duration:t.duration,name:t.name,long_task_durations:t.longTaskDurations,number_of_blocking_tasks:t.numberOfBlockingTasks,tbt:t.totalBlockingTime,longest_blocking_time:t.longestBlockingTime})),interactivity_span_aggregations:Object.entries(t.throttleableMetrics.interactivitySpanAggregations).reduce((t,[e,i])=>Object.assign({},t,{[e]:{tbt_per_second:i.totalBlockingTimePerSecond,number_of_blocking_tasks_per_second:i.numberOfBlockingTasksPerSecond,min_frame_drops_per_second:i.minFrameDropsPerSecond,count:i.count,duration:i.duration}}),{})}),null===(e=this.trackingModule)||void 0===e||e.queueJitneyEvent({schema:r.a,event_data:Object.assign({assets:t.unthrottleableMetrics.assets,page_request_method:t.pageRequestMethod,universal_page_name:t.universalPageName,impression_uuid:t.impressionUuid,ttfcp:t.throttleableMetrics.ttfcp,ttfmp:t.throttleableMetrics.ttfmp,fid:t.throttleableMetrics.fid,tbt:t.throttleableMetrics.totalBlockingTime,event_data:t.eventData,event_data_schema:t.eventDataSchema,domain_and_path:t.domainAndPath,network_information:t.networkInformation,web_performance_timing:t.throttleableMetrics.webPerformanceTiming,tbt_pre_hydrate:t.throttleableMetrics.tbtPreHydrate,tbt_post_hydrate:t.throttleableMetrics.tbtPostHydrate,time_to_hydrate:t.throttleableMetrics.timeToHydrate,recorder_duration:t.throttleableMetrics.recorderDuration,time_to_fid:t.throttleableMetrics.timeToFid,number_of_blocking_tasks:t.throttleableMetrics.numberOfBlockingTasks,number_of_long_input_delays:t.unthrottleableMetrics.numberOfLongInputDelays,total_duration_of_long_input_delays:t.unthrottleableMetrics.totalDurationOfLongInputDelays,long_input_delays:t.unthrottleableMetrics.longInputDelays,long_input_delay_counts:t.unthrottleableMetrics.longInputDelayCounts,timed_interactions:t.unthrottleableMetrics.timedInteractions,longest_blocking_time:t.throttleableMetrics.longestBlockingTime,longest_blocking_task_index:t.throttleableMetrics.longestBlockingTaskIndex,cumulative_layout_shift:t.unthrottleableMetrics.cumulativeLayoutShift,lcp:t.throttleableMetrics.lcp},n,{document_age:t.unthrottleableMetrics.documentAge})})}),this.performanceRecorders=[],null===(t=this.trackingModule)||void 0===t||t.getLogger().flushEventQueue())},this.setPageCloseHandlers=()=>{window.addEventListener("beforeunload",this.flushAllEvents,!0),window.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&this.flushAllEvents()}),Object(o.o)()&&window.addEventListener("pagehide",this.flushAllEvents)},this.currentPathname=window.location.pathname,this.currentSearch=window.location.search,this.createNewRecorder({isDirectRequest:!0}),this.trackingModule=t,this.setPageCloseHandlers()}}({trackingModule:n.a})},oIG1:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"e",(function(){return a})),i.d(e,"f",(function(){return c})),i.d(e,"b",(function(){return u})),i.d(e,"d",(function(){return d}));var r=i("Ri7V"),n=i("lVss");let s;function o(t){h(t,"BEGIN")}function a(t){h(t,"END")}function c(t){const e=Object(n.b)(),i=Object.values(s).reduce((t,i)=>[...t,...e.getEntriesByName(l(i,"BEGIN"),"mark"),...e.getEntriesByName(l(i,"END"),"mark")],[]).filter(e=>e.startTime>=t.start&&e.startTime<t.end);return i.sort((t,e)=>t.startTime-e.startTime),function(t,e){const i=new Set,r=new Map,n=[];return t.forEach(t=>{const{name:s,event:o}=function(t){const e=t.endsWith("_END")?"END":"BEGIN";return{name:t.slice("PPS_SPAN_".length,-(e.length+1)),event:e}}(t.name);"BEGIN"===o?r.has(s)||r.set(s,t.startTime):(r.has(s)?n.push({name:s,start:r.get(s),end:t.startTime}):i.has(s)||n.push({name:s,start:e.start,end:t.startTime}),r.delete(s),i.add(s))}),r.forEach((t,i)=>{n.push({name:i,start:t,end:e.end})}),n}(i,t)}function l(t,e){return`PPS_SPAN_${t}_${e}`}function h(t,e){Object(n.b)().mark(l(t,e))}function u(t){const e=new Map;t.forEach(t=>{var i;const{name:r}=t;e.has(r)||e.set(r,[]),null===(i=e.get(r))||void 0===i||i.push(t)});const i={};return e.forEach((t,e)=>{const r=t.reduce((t,e)=>t+e.duration,0),n=t.reduce((t,e)=>t+e.totalBlockingTime,0),s=t.reduce((t,e)=>t+e.numberOfBlockingTasks,0),o=t.flatMap(t=>t.longTaskDurations),a=o.map(t=>(t-1e3/60)/(1e3/60)).reduce((t,e)=>t+e,0);0!==r&&(i[e]={totalBlockingTimePerSecond:n/r*1e3,numberOfBlockingTasksPerSecond:s/r*1e3,minFrameDropsPerSecond:a/r*1e3,duration:r,count:t.length})}),i}function d(){return!!r.a.getBootstrap("web_pps_interactivity_spans")}!function(t){t.DESKTOP_MAP_INTERACTION="DESKTOP_MAP_INTERACTION",t.MOWEB_MAP_INTERACTION="MOWEB_MAP_INTERACTION",t.MOWEB_MAP_USER_INTERACTION="MOWEB_MAP_USER_INTERACTION",t.DESKTOP_MAP_CHANGE_INTERACTION="DESKTOP_MAP_CHANGE_INTERACTION"}(s||(s={}))}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/1ed2-259d6f2e.js.map