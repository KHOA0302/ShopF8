(window.webpackJsonp=window.webpackJsonp||[]).push([["7247"],{"1bks":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("eSmw");function r(e,{key:t,value:n}){return Object.assign({},e,{[t]:n})}function s(e,t){return t.reduce((e,{key:t,value:n,valueType:s,selected:c,isSerialized:i,resetKeys:l})=>{let o=e;return l&&l.length&&(o=l.reduce((e,t)=>Object(a.a)(e,t),o)),t&&s?i?r(o,{key:t,value:n}):c?"array"===s&&null!==n?function(e,{key:t,value:n}){const a=e[t];if(a instanceof Array){const r=e[t]?[...a,n]:[n];return Object.assign({},e,{[t]:r})}return Object.assign({},e,{[t]:[n]})}(o,{key:t,value:n}):r(o,{key:t,value:n}):"array"===s?function(e,{key:t,value:n}){const r=e[t];if(null==r)return e;if(Array.isArray(r)){const a=r.filter(e=>null!==e&&String(e)!==String(n));return Object.assign({},e,{[t]:a})}return Object(a.a)(e,t)}(o,{key:t,value:n}):r(o,{key:t,value:null}):o},e)}},"2S3b":function(e,t,n){"use strict";var a=n("OfY+"),r=n("y611"),s=n("QQg5");t.a=Object(s.c)({responseFilters:[r.B,a.A]})},"3R6r":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var a=n("q1tI"),r=n("1bks"),s=n("BOJ1");function c(e){return!e.adults&&(e.children||e.toddlers||e.infants)?Object.assign({},e,{adults:1}):e}function i(e,t){switch(t.type){case"UPDATE":{const{updatedValues:n,callback:a}=t.payload,s=c(Object(r.a)(e,n));return a&&a(s),s}case"REMOVE_KEYS":{const{filterStateSerializationContexts:n,callback:a,keysToRemove:r}=t.payload,c=Object(s.a)({paramKeysToRemove:r,stagedFilters:e,filterStateSerializationContexts:n});return a&&a(c),c}case"RESET":{const{newStagedFilters:e,callback:n}=t.payload;return n&&n(e),e}default:return e}}function l(e){const[t,n]=Object(a.useReducer)(i,e);return[t,n]}},"DFz+":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("MtSu"),r=n("puYV");function s(e,t){var n;const s=null==e?void 0:e.searchInputFlowOrders,c=null==e||null===(n=e.searchInputComponents)||void 0===n?void 0:n.filter(r.a);return null==s||null==c?{}:Object.fromEntries(Object.entries(s).map(([e,n])=>[e,n.map(e=>t&&t[e]?Object.assign({},t[e]):{stepId:e,filterSectionId:void 0}).map(e=>{var t;const n=function(e){if(null!=e&&e.includes("dates"))return a.a.DATES;switch(e){case"location":return a.a.LOCATION;case"dates":return a.a.DATES;case"guests":return a.a.GUESTS;case"vertical_switch":return a.a.VERTICAL_SWITCHER;default:return}}(e.stepId),r=c.find(e=>e.id===n||"date_picker"===e.filterSectionId&&"dates"===n);return e.filterSectionId=null!==(t=null==r?void 0:r.filterSectionId)&&void 0!==t?t:void 0,e.stepType=null!=n?n:void 0,e})]))}},JL91:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return g}));var a=n("G4qV"),r=n("OfY+"),s=n("y611");const c=e=>Object(r.k)(e).query_text||null,i=e=>{var t;return(null===(t=Object(s.z)(e))||void 0===t?void 0:t.queryText)||null},l=e=>!!Object(r.k)(e).show_as_hint,o=e=>{var t;return!(null===(t=Object(s.z)(e))||void 0===t||!t.showAsHint)},u=e=>{var t,n;return null!==(t=null!==(n=Object(r.A)(e).query)&&void 0!==n?n:Object(r.A)(e).location)&&void 0!==t?t:null},d=e=>{var t,n;return null!==(t=null!==(n=Object(s.B)(e).query)&&void 0!==n?n:Object(s.B)(e).location)&&void 0!==t?t:null},p=(e,t)=>t&&e||null,h=Object(a.createSelector)(c,l,p),b=Object(a.createSelector)(i,o,p),f={key:"DEFAULT",searchType:"DEFAULT"},O=(e,t,n,a,r)=>r&&a&&a!==e?Object.assign({},f,{name:a,inputValue:a}):!t||n?null:Object.assign({},f,{name:t,inputValue:e||""}),g=Object(a.createSelector)(e=>Object(r.k)(e).query||null,c,l,u,r.t,O);Object(a.createSelector)(e=>{var t;return(null===(t=Object(s.z)(e))||void 0===t?void 0:t.query)||null},i,o,d,s.q,O)},MtSu:function(e,t,n){"use strict";let a;n.d(t,"a",(function(){return a})),function(e){e.VERTICAL_SWITCHER="vertical_switcher",e.LOCATION="location",e.DATES="dates",e.GUESTS="guests"}(a||(a={}))},OaLA:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("puYV");function r(e){var t,n;const r=(null==e||null===(t=e.searchParams)||void 0===t||null===(n=t.refinementPaths)||void 0===n?void 0:n.filter(a.a))||[];return r.length&&r||(null==e?void 0:e.refinementPath)&&[null==e?void 0:e.refinementPath]||[]}},PoJY:function(e,t,n){"use strict";var a=n("17x9"),r=n.n(a),s=n("sWu/"),c=n("avaO");t.a=r.a.shape({params:r.a.arrayOf(s.b),place_id:r.a.string,query:r.a.string,refinement_paths:r.a.arrayOf(r.a.string),tab_id:c.a})},"VJ+F":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("MbSt");function a(e){return e.replace(/-[a-zA-Z]/g,(e,t)=>0===t?e[1]:e[1].toUpperCase())}function r(e){if(null==(null==e?void 0:e.steps))return{};const t={},n=null==e?void 0:e.metadata;return e.steps.forEach(e=>{if(null==e||null==n||null==e.stepId)return;const r=e.stepId,s=a(e.stepId);t[r]=e,function(e,t){return null!=t&&null!=e&&("__typename"!==e&&Object.prototype.hasOwnProperty.call(t,e))}(s,n)&&(t[r]=Object.assign({},t[r],{metadata:n[s]}))}),t}},"aN7+":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return o}));var a=n("q1tI"),r=n("g8Fj"),s=n("euU2"),c=n("puYV"),i=n("Ri7V");function l(e,t=[],n=!0){Object(a.useEffect)(()=>{if(n){const t=Object(s.b)(e);return()=>{t&&Object(s.a)({sessionId:t,useSendBeacon:!0})}}},[...t,n])}function o(e){const t=i.a.getBootstrap("raven.enable_sdui_logging"),n=Object(a.useMemo)(()=>(e||[]).filter(c.a),[e]),l=Object(a.useRef)({});Object(a.useEffect)(()=>{if(t)return n.forEach(({eventData:e,eventDataSchema:t})=>{const n=r.a.logUniversalSessionStartEventFromServerData({eventData:e,eventDataSchema:t});l.current[t]={sessionId:n,eventData:e}}),()=>{Object.values(l.current).forEach(({sessionId:e})=>{Object(s.a)({sessionId:e,useSendBeacon:!0})})}},[t]),Object(a.useEffect)(()=>{if(!t)return;const e=l.current,a=n.reduce((e,t)=>(e[t.eventDataSchema]=t.eventData,e),{});Object.entries(e).forEach(([t,n])=>{a[t]||(Object(s.a)({sessionId:n.sessionId,useSendBeacon:!0}),delete e[t])}),Object.entries(a).forEach(([t,n])=>{const a=e[t];if(a){if(a.eventData!==n){Object(s.a)({sessionId:e[t].sessionId,useSendBeacon:!0});const a=r.a.logUniversalSessionStartEventFromServerData({eventDataSchema:t,eventData:n});e[t]={sessionId:a,eventData:n}}}else{const a=r.a.logUniversalSessionStartEventFromServerData({eventDataSchema:t,eventData:n});e[t]={sessionId:a,eventData:n}}})},[n,t])}},avaO:function(e,t,n){"use strict";var a=n("17x9"),r=n.n(a),s=n("QD4+");t.a=r.a.oneOf(Object.values(s.g))},eouk:function(e,t,n){"use strict";function a(e,t){const n="function"==typeof t?t:e=>(e||{})[t||""],a={};return(e||[]).forEach(e=>{const t=n(e);t&&(a[t]=e)}),a}n.d(t,"a",(function(){return a}))},"qG/L":function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return o}));var a=n("UW9d"),r=n("MbSt");function s(e){return e.replace(/[A-Z]+/g,e=>"_"+e.toLowerCase())}function c(e){return Object(r.a)(e,s)}function i(e){return e.replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}function l(e){return Object(r.a)(e,i,a.a)}function o(e,t){return Object(r.a)(e,e=>t.includes(e)?e:i(e))}},qaIz:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v}));var a=n("17x9"),r=n.n(a),s=n("G4qV"),c=n("ZesN"),i=n("7jyO"),l=n("PoJY");var o=r.a.shape({selected:r.a.bool,search_params:l.a.isRequired,title:r.a.string,type:r.a.string}),u=n("OfY+"),d=n("y611"),p=n("JL91"),h=n("puYV"),b=n("qG/L");const f=[],O=e=>Object(u.k)(e).autosuggestions_response||null,g=Object(s.createSelector)([u.t,e=>Object(u.k)(e).suggestions||null,p.d],(e,t,n)=>e||null==t||!t.length?f:t.map(e=>Object.assign({},e,{name:n||e.title,search_params:Object.assign({},e.search_params,{query:n})}))),v=(Object(s.createSelector)([d.q,e=>{var t;return(null===(t=Object(d.z)(e))||void 0===t?void 0:t.suggestions)||null},p.e],(e,t,n)=>e||null==t||!t.length?f:t.filter(h.a).map(e=>Object(b.e)(Object.assign({},e,{name:n||e.title,searchParams:Object.assign({},e.searchParams,{query:n})})))),Object(s.createSelector)(e=>Object(i.a)(e,"exploreTab.response.metadata"),e=>e&&e.suggested_destionations_response?e.suggested_destionations_response:null));Object(c.a)((function(e){return{suggestions:g(e)}}));r.a.arrayOf(o).isRequired},wm0y:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),s=n("Ty5D"),c=n("ygRV"),i=n("puYV"),l=n("kvwE"),o=n("cVPA"),u=n.n(o),d=n("j0ku"),p=n("rQBq"),h=n("Vc5N"),b=n("fArA"),f=n("3R6r"),O=n("xG3B"),g=n("2S3b"),v=n("QQg5"),S=n("OfY+"),m=n("y611"),j=n("6J+J");var E=Object(b.compose)(Object(v.b)({filterSections:[e=>{var t;return null===(t=Object(m.e)(e))||void 0===t?void 0:t.sections},e=>{var t;return null===(t=Object(S.g)(e))||void 0===t?void 0:t.sections}],hasFilterBarv2:[e=>{var t;return!(null===(t=Object(m.e)(e))||void 0===t||!t.filterBar)||!1},()=>!1]}),g.a)((function({responseFilters:e,filterSections:t,renderStructuredSearchInput:n,hasFilterBarv2:r}){const[s,c]=Object(f.a)(e),i=Object(O.a)(e);return Object(a.useEffect)(()=>{Object(j.G)(i,e,j.b)&&c({type:"RESET",payload:{newStagedFilters:e}})},[c,i,e]),n({updateFilters:Object(a.useCallback)((e,t)=>{c({type:"UPDATE",payload:{updatedValues:e,callback:t}})},[c]),clearFilters:Object(a.useCallback)((e,t)=>{c({type:"REMOVE_KEYS",payload:{keysToRemove:e,callback:t}})},[c]),stagedFilters:s,responseFilters:e,filterSections:t,hasFilterBarv2:r})})),y=n("eouk"),I=n("WsJm"),C=n("X3aX"),x=n.n(C),T=n("cV4d"),k=n("2x0x"),F=n("0Kbk"),_=n("rLrX"),A=n("gLva"),w=n("Q2fV"),P=n("UfFQ"),U=n("iVKo"),q=n("Xi6a"),D=n("ymsQ"),R=n("fmTR");var B=Object(h.d)(({dls19:e})=>({container:{position:"relative",alignItems:"center",display:"flex",flex:"1 0 0%",margin:-1,minWidth:0},inputLabel:Object.assign({fontWeight:e.typography.weight.bold,letterSpacing:e.typography.tracking.wide},e.typography.base.sm,{paddingBottom:2}),koanSectionsContainer:{padding:"8px 0 0",margin:"0 -32px -8px",width:500},koanSectionsContainer_single:{paddingBottom:"8px"},inputContainer:{cursor:"pointer",display:"block",backgroundClip:"padding-box",border:"1px solid transparent",borderRadius:32,flex:"1 0 0%",minWidth:0,padding:"14px 32px","::before":{borderWidth:"0 1px",borderStyle:"solid",borderColor:`var(${R.a}, transparent)`,content:'""',display:"none",height:32,marginTop:-16,position:"absolute",right:0,top:"50%",zIndex:0},"::after":{backgroundClip:"padding-box",border:"1px solid transparent",borderRadius:32,bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,zIndex:0}},inputContainer_firstInput:{"::before":{borderLeft:0}},inputContainer_lastInput:{"::before":{borderRight:0}},inputContainer_inactive:{":hover":{"::before":{display:"block"},"::after":{backgroundColor:e.palette.bebe}},":focus-within":{"::before":{display:"block"},"::after":{backgroundColor:e.palette.white,borderColor:e.palette.white,boxShadow:e.elevation.primary,left:0,right:0}}},inputContainer_active:{zIndex:3,"::before":{display:"block"},"::after":{backgroundColor:e.palette.white,borderColor:e.palette.white,boxShadow:e.elevation.primary,left:0,right:0}},content:{position:"relative",zIndex:1},clear:{flex:"0 0 0%",position:"relative",zIndex:5},clearContent:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:24},input:Object.assign({display:"block",border:0,margin:0,padding:0,width:"100%",background:"none"},e.typography.base.md,{fontWeight:e.typography.weight.medium,color:e.palette.hof,textOverflow:"ellipsis"},Object(U.a)(Object.assign({},e.typography.base.md,{fontWeight:e.typography.weight.book,color:e.palette.hof,opacity:.7})),{"::-ms-clear":{display:"none"},":focus":{outline:"none"},":focus:not(:placeholder-shown)":{paddingRight:12}}),panel:{left:0,position:"absolute",right:0,top:"100%",zIndex:4},searchButton:{flex:"0 0 auto",marginLeft:-6,paddingRight:9,position:"relative",zIndex:5},visuallyHidden:Object.assign({},A.a)}))((function({css:e,firstInput:t=!1,hasAttachedPanel:n=!1,id:s,isActive:c=!1,label:i,lastInput:l=!1,placeholderText:o,required:u=!1,searchButton:d,sections:p=[],styles:h,defaultSelectedSuggestion:b,defaultIsOpen:f,onChange:O,onSelect:g,onStateChange:v,onOutsideClick:S}){const m=Object(a.useRef)(null);return Object(a.useEffect)(()=>{c&&m.current&&m.current.focus()},[c]),r.a.createElement(T.a,{id:s,defaultSelectedSuggestion:b,defaultIsOpen:f,onChange:O,onSelect:g,onStateChange:v,onOutsideClick:S,defaultActiveIndex:-1,suggestionToString:P.a,render:a=>{const{activeIndex:b,clearInput:f,getAriaDescriptionId:O,getDropdownProps:g,getInputProps:v,getSuggestionProps:S,getStatusProps:j,isFocused:E,userInput:y}=a,I=`bigsearch-query-${n?"attached":"detached"}-${s}`,C=v({id:I}),T=Object(w.a)(C),{value:A,ref:P}=T,U=c||E,R=U&&p&&p.length>0;return r.a.createElement("div",e(h.container),r.a.createElement("label",Object.assign({},e(h.inputContainer,U?h.inputContainer_active:h.inputContainer_inactive,t&&h.inputContainer_firstInput,l&&h.inputContainer_lastInput),{htmlFor:I}),r.a.createElement("div",e(h.content),r.a.createElement("div",e(h.inputLabel),i),r.a.createElement("input",Object.assign({},e(h.input),T,{name:"query",placeholder:o,ref:e=>{m.current=e,P(e)},required:u,"data-testid":"structured-search-input-field-query"})))),U&&A&&r.a.createElement("div",e(h.clear),r.a.createElement("div",e(h.clearContent),r.a.createElement(q.a,{onMouseDown:f,onPress:f}))),R&&r.a.createElement("div",e(h.panel),r.a.createElement(D.a,{dataTestId:"structured-search-input-field-query-panel"},r.a.createElement("ul",Object.assign({},g(),e(h.koanSectionsContainer,p.length<=1&&h.koanSectionsContainer_single),{role:"listbox"}),r.a.createElement(k.a,{sections:p,getSuggestionProps:S,activeIndex:b})))),r.a.createElement("span",Object.assign({id:O()},e(h.visuallyHidden)),r.a.createElement(x.a,{k:"search.voiceover.VoiceOver_instructions_for_navigating_list_of_search_suggesions"})),r.a.createElement("span",Object.assign({},j(),e(h.visuallyHidden)),R&&r.a.createElement(F.a,{userInput:y,suggestionCount:Object(_.a)(p)})),d&&r.a.createElement("div",e(h.searchButton),d))},checkMountBugExperiment:!0})})),V=n("qaIz"),L=n("JL91"),N=n("2mql"),G=n.n(N),M=n("QD4+"),H=n("bss5"),Q=n("HnpV"),z=n("wtiW"),W=n("/4n/"),Y=n("115s"),J=n("ZbJx"),K=n("mPNv"),X=n("enR6"),Z=n("cc4C");var $=function(e){class t extends a.Component{constructor(e){super(e),this.handleSelection=this.handleSelection.bind(this),this.handleClear=this.handleClear.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.onSearchQueryUpdate=this.onSearchQueryUpdate.bind(this)}handleSelection(e){const{onNextStep:t,onSearchTypeChange:n,onUpdateFilters:a,responseFilters:r,searchContext:s}=this.props,{searchParams:c,searchType:i,suggestionType:l,responseMetadata:o}=e;if(Object(J.b)(e))Object(J.a)(e);else if(i!==H.c.AUTOSUGGEST||l!==Z.c.FLEXIBLE_DESTINATIONS){if(i!==M.q.SAVED_SEARCH&&i!==M.q.RECENT_SEARCH||(Object(p.Q)({nextSearchFilters:c,searchContext:s,searchFilters:r}),Object(Q.i)({responseFilters:r,searchType:H.c.AUTOSUGGEST,stagedFilters:c})),i===M.q.GEOLOCATION||i===M.q.NEAR_ME)return Object(Y.b)().then(e=>{const r=Object(X.a)(Object.assign({},c,e));a(r),n(H.c.AUTOSUGGEST),a(r,e=>{this.logSelection(i,e,o)}),t()}).then(()=>Object(Y.a)()).then(e=>{const t=Object(X.a)(Object.assign({},c,e));a(t)});if(i===M.q.AUTOSUGGEST||"AUTOSUGGEST"===i){const e=Object(X.a)(c);n(H.c.AUTOSUGGEST),a(e,e=>{this.logSelection(i,e,o)}),t()}if(i===M.q.AUTOCOMPLETE){const e=Object(X.a)(c);n(H.c.AUTOCOMPLETE_CLICK),a(e,e=>{this.logSelection(i,e,o)}),t()}}else Object(Q.i)({stagedFilters:Object.assign({},c),responseFilters:r,searchType:H.c.AUTOSUGGEST})}onSearchQueryUpdate(e){const{onUpdateFilters:t,onSearchTypeChange:n}=this.props;t([Object(K.a)(e),{key:"place_id",value:null,isSelected:!0}]),n(M.q.SEARCH_QUERY)}handleSubmit(e){const{currentSearchType:t,onNextStep:n}=this.props;t!==H.c.AUTOCOMPLETE_CLICK&&t!==H.c.AUTOSUGGEST&&this.onSearchQueryUpdate(e),n(),Object(W.a)()}logSelection(e,t,n={}){const{searchContext:a,responseFilters:r}=this.props;if(Object(z.b)({searchContext:a,stagedFilters:t}),e===M.q.AUTOCOMPLETE_CLICK){const{requestId:e=""}=n;Object(p.g)(a,r,t,e)}else e===M.q.REFINEMENT_SUGGESTION?Object(p.lb)(a,r,t):e===M.q.GROUP_DESTINATION?Object(p.S)({searchContext:a,searchFilters:r,nextSearchFilters:t}):e===M.q.NEAR_ME&&Object(p.O)({searchContext:a,searchFilters:r,nextSearchFilters:t})}handleFocus(){const{searchContext:e,responseFilters:t,onFocus:n}=this.props;Object(p.P)(e),Object(z.a)({searchContext:e,stagedFilters:t}),n&&n()}handleBlur(){const{searchContext:e,onBlur:t}=this.props;Object(p.M)(e),t&&t()}handleInputChange(e){this.onSearchQueryUpdate(e)}handleClear(){const{responseFilters:e,searchContext:t}=this.props;this.props.onInputClear(),Object(p.R)({searchContext:t,searchFilters:e})}render(){const t=this.props,{searchPlaceholder:n,defaultSelectedSuggestion:a}=t,s=babelHelpers.objectWithoutPropertiesLoose(t,["responseFilters","stagedFilters","updateFilters","clearFilters","searchPlaceholder","staticPlaceholder","defaultSelectedSuggestion","onNextStep","onSearchTypeChange","currentSearchType"]);return r.a.createElement(e,Object.assign({},s,{onClear:this.handleClear,onFocus:this.handleFocus,onBlur:this.handleBlur,onInputChange:this.handleInputChange,onSelect:this.handleSelection,onSubmit:this.handleSubmit,placeholder:n||void 0,defaultSelectedSuggestion:a||void 0}))}}return t.WrappedComponent=e,G()(t,e)},ee=n("oHGl");var te=Object(b.compose)(Object(v.c)({exploreTabsAutosuggestionsResponse:[Object(m.c)(m.a),V.a],currentTab:[m.d,S.f],placeholder:[e=>Object(L.c)(e)||u.a.t("shared.Search"),e=>Object(L.b)(e)||u.a.t("shared.Search")]}),I.a,$,ee.a)(B),ne=n("9ibV"),ae=n("t6s0"),re=n("CFYr"),se=n("DDwZ"),ce=n("SSFV"),ie=n("r7IX"),le=n("ApQO"),oe=n("YuI1"),ue=n("caLQ");function de(e,t){return t?t.diff(e,"days"):0}var pe=n("St6z"),he=n("2jR3"),be=n("o0Su"),fe=n("pxle"),Oe=n("I5Ul"),ge=n("504r"),ve=n("Ha7d"),Se=n("xDr8"),me=n("8/PR"),je=n("Ri7V"),Ee=n("TxO+");function ye(e,t,n,a){const r=a?"inline":"modal";switch(e){case"location":Object(p.cb)({searchContext:t,selectedVertical:n,surface:r});break;case"dates":Object(p.Y)({searchContext:t,selectedVertical:n,surface:r});break;case"guests":Object(p.ab)({searchContext:t,selectedVertical:n,surface:r})}}const Ie=["DATE_RANGE_COMBINED","DATE_RANGE_SPLIT","GUESTS","QUERY"];var Ce=Object(h.d)(({dls19:e})=>({queryFlex:{flex:"1 0 0%",minWidth:0},queryFlex_wide:{[e.responsive.queries.mediumPlusAndAbove]:{flex:"1.5 0 0%"}},stepMessage:Object.assign({},e.typography.base.md,{color:e.palette.foggy,fontWeight:e.typography.weight.medium,textAlign:"center",flexBasis:"100%",paddingBottom:16})}))((function({searchInputComponents:e,initialSelectedInputComponentId:t=null,stagedFilters:n,responseFilters:s,clearFilters:c,updateFilters:l,filterSections:o,flowOrders:u,onSubmit:d,hasAttachedPanel:h=!1,autocompleteVertical:b,refinementPaths:f,searchBlockId:O,searchContext:g,formHeader:v,hasFilterBarv2:S=!1,css:m,styles:E}){var I,C,x,T;const[k,F]=Object(a.useState)(t),[_,A]=Object(a.useState)(!!t);Object(a.useEffect)(()=>{_&&Object(ge.a)()},[_]),Object(a.useEffect)(()=>{t&&!k&&(F(t),A(!0))},[t]);const{messageText:w,minimumNights:P}=null!==(I=null==u||null===(C=u.dates)||void 0===C||null===(x=C[0])||void 0===x?void 0:x.metadata)&&void 0!==I?I:{},U=Object(oe.a)(n.checkin),q=Object(oe.a)(n.checkout),R=Object(a.useMemo)(()=>Object(y.a)(o,"filterSectionId"),[o]),B=Object(a.useRef)(H.c.UNKNOWN),V=e=>{B.current=e},L=Object(a.useCallback)((e,t)=>{l(e,t),H.f.includes(B.current)&&B.current!==H.c.UNKNOWN||V(H.c.FILTER_CHANGE)},[l,B]),N=Object(a.useMemo)(()=>null==e?void 0:e.find(({desktopInputMode:e})=>"QUERY"===e),[e]),{defaultSelectedSuggestion:G,clearQuery:M}=Object(me.a)({autocompleteVertical:b,clearFilters:c,textValue:(null==N?void 0:N.textValue)||""}),z=e=>{e&&e.preventDefault&&e.preventDefault(),g&&Object(p.db)({searchContext:g,selectedVertical:O,surface:h?"inline":"modal"});const t=N&&!1!==N.requiredInput&&N.id;if(t&&!Object(le.a)(n))return F(t),void A(!0);const a=n.query!==(null==s?void 0:s.query),r=Object.assign({},n,f&&{refinement_paths:f},S&&a&&{amenities:[],kg_and_tags:[]},a&&{disable_auto_translation:!1});var c;P&&U&&de(U,q)<P&&(r.checkout=(c=P,U.clone().add(c,"days").format(ue.q))),Object(j.G)(r,s,[...j.b,"refinement_paths"])&&Object(Q.i)({stagedFilters:Object.assign({},r,{source:"structured_search_input_header"}),responseFilters:s,searchType:B.current}),d&&d()},W=Object(a.useRef)(!1);Object(a.useEffect)(()=>{W.current&&(W.current=!1,z())},[W.current]);const Y=k?null==u||null===(T=u[k])||void 0===T?void 0:T[0]:void 0;Object(a.useEffect)(()=>{P&&U&&q&&de(U,q)<P&&c(["checkout"])},[U,q,c,P]),Object(ve.a)(k);const J=r.a.createElement(Se.a,{active:_,dataTestId:"structured-search-input-search-button",onSubmit:z}),K="flexible_dates"===n.date_picker_type&&Object(Ee.a)("super_date_flexibility"),[X,Z]=Object(a.useState)(K);return Object(a.useEffect)(()=>{Z(K)},[K]),r.a.createElement(pe.a,{onSubmit:z,onOutsideFocus:()=>{F(null),A(!1)},formHeader:v,active:_},null==e?void 0:e.map(({desktopInputMode:t,desktopTitle:a,desktopPlaceholderText:o,filterSectionId:u,id:d,requiredInput:v},S)=>{if(!d||!u||!t)return null;if(!Ie.includes(t))return Object(he.a)(new Error("Unknown searchInputComponent.desktopInputMode: "+t),{tags:{team:"search-input"}}),null;const j=d===k,y=(null==a?void 0:a.filter(i.a))||[],I=y[0]||"",C=(null==o?void 0:o.filter(i.a))||[],x=C[0]||"",T=S===e.length-1,_={firstInput:0===S,lastInput:T,searchButton:T?J:void 0},P=t=>{const n=t&&function(e,t){return e.find(({id:e})=>{var n,a,r;switch(e){case"dates":return!t.checkin&&!t.checkout;case"guests":return null===((null!==(n=t.adults)&&void 0!==n?n:null)||(null!==(a=t.children)&&void 0!==a?a:null)||(null!==(r=t.infants)&&void 0!==r?r:null));default:return!1}})}(e,t);1===e.length||t&&!n?W.current=!0:n?F(n.id):(t=>{var n,a;F(null!==(n=null===(a=e[t])||void 0===a?void 0:a.id)&&void 0!==n?n:null),A(!0)})(S+1)},U=()=>{F(e=>e===d?"":e)},q=je.a.getBootstrap("koanv2_desktop")?ne.a:te;if("QUERY"===t)return r.a.createElement("div",Object.assign({},m(E.queryFlex,e.length>2&&E.queryFlex_wide),{key:u}),r.a.createElement(q,Object.assign({},_,{key:u,id:u,label:I,placeholderText:x,required:!1!==v,defaultSelectedSuggestion:G,onFocus:()=>{F(d),A(!0),g&&f&&ye(d,g,O||"",h)},onBlur:U,autocompleteVertical:b,refinementPaths:f,refinementPath:null==f?void 0:f[0],isActive:j,hasAttachedPanel:h,stagedFilters:n,onInputClear:M,onNextStep:P,currentSearchType:B,onSearchTypeChange:V,onUpdateFilters:l,searchContext:g,responseFilters:s})));const N=R[u],H=Object(re.b)(N),Q=Object(ce.c)((null==H?void 0:H.filter(i.a))||[]),z=Object(se.e)({id:u,stagedFilters:n})||void 0,K=()=>{j?F(""):(F(d),A(!0),g&&null!=f&&f.length&&ye(d,g,O||"",h))},$=()=>{const e=Object(ae.e)({sections:[N]}).filter(e=>!re.a.includes(e));c(e,e=>{g&&Object(p.q)(g,u,e,n)})},ee="DATE_RANGE_COMBINED"===t||"DATE_RANGE_SPLIT"===t,le=j&&r.a.createElement(D.a,{fullWidth:"DATE_RANGE_SPLIT"===t,dataTestId:`structured-search-input-field-${d}-panel`},r.a.createElement("div",m(ee),r.a.createElement(ie.a,{filterSection:N,filterSectionId:u,stagedFilters:n,updateFilters:L,searchContext:g,activeFlowStep:Y,searchBlockId:O,setShowSuperFlexibleDatesInput:Z,showSuperFlexibleDatesInput:X}),ee&&w&&r.a.createElement("div",m(E.stepMessage),w)));return r.a.createElement(r.a.Fragment,{key:u},S>0&&r.a.createElement(Oe.a,null),"DATE_RANGE_SPLIT"===t?r.a.createElement(fe.a,Object.assign({},_,{active:j,labels:y,onClearPress:$,onOutsideFocus:U,onPress:K,panel:le,placeholders:C,stagedFilters:n,showSuperFlexibleDatesInput:X,tripLengthValueToLabel:Q})):r.a.createElement(be.a,Object.assign({},_,{label:I,value:z,placeholder:x,active:j,onPress:K,onOutsideFocus:U,onClearPress:$,panel:le,dataTestId:`structured-search-input-field-${d}-button`})))}))})),xe=n("DFz+"),Te=n("OaLA");var ke=Object(h.d)(({dls19:e})=>({inputs:{paddingBottom:e.spacing.primitives.size_small,position:"relative",zIndex:1}}))((function({css:e,formHeader:t,hasAttachedPanel:n,initialSelectedInputComponentId:s,onSubmit:c,searchBlock:l,searchContext:o,flowSteps:u,styles:d}){const{searchInputUnion:p}=l,h=Object(a.useMemo)(()=>{var e;return(null==p||null===(e=p.searchInputComponents)||void 0===e?void 0:e.filter(i.a))||[]},[p]),b=Object(a.useMemo)(()=>Object(xe.a)(p,u),[u,p]);return r.a.createElement("div",Object.assign({},e(!n),{"data-nosnippet":!0}),r.a.createElement("div",e(d.inputs),r.a.createElement(E,{renderStructuredSearchInput:({updateFilters:e,clearFilters:a,stagedFilters:i,responseFilters:u,filterSections:d,hasFilterBarv2:p})=>r.a.createElement(Ce,{clearFilters:a,filterSections:d,formHeader:t,hasAttachedPanel:n,flowOrders:b,initialSelectedInputComponentId:s,onSubmit:c,autocompleteVertical:l.autocompleteVertical||void 0,refinementPaths:Object(Te.a)(l),searchBlockId:l.id||"",responseFilters:u,searchContext:o,searchInputComponents:h,stagedFilters:i,updateFilters:e,hasFilterBarv2:p})})))})),Fe=n("XgdE"),_e=n("igEA"),Ae=n("1A9I");var we=Object(d.a)("SearchBlocks",[])((function({initialSelectedInputComponentId:e,isTabbed:t=!1,onSearchBlockSubmit:n,searchBlocks:s,searchContext:c,flowSteps:i}){const[l,o]=Object(a.useState)(()=>s.findIndex(({selected:e})=>e)||0),d=Object(O.a)(l),h=Object(a.useCallback)(e=>{const t=s.findIndex(({refinementPath:t})=>t===e);if(o(t||0),c){const e=s[t];Object(p.nb)({selectedVertical:(null==e?void 0:e.id)||"",searchContext:c})}},[s,c]);return r.a.createElement(ke,{hasAttachedPanel:t,initialSelectedInputComponentId:e,onSubmit:n,searchBlock:s[l],searchContext:c,flowSteps:i,formHeader:r.a.createElement(Fe.a,{label:u.a.t("simple_nav.header.big_search_title")},s.map((e,n)=>{var a;const s=(null===(a=e.tabSelector)||void 0===a?void 0:a.desktopTabLabel)||e.title||"",{badge:i,directUrl:o,id:u,refinementPath:b}=e,f=u||s.replace(/\W/g,"-");return o?r.a.createElement(Ae.a,{badge:null!=i?i:void 0,href:o,key:f,onPress:()=>{c&&Object(p.nb)({selectedVertical:u||"",searchContext:c})}},s):r.a.createElement(_e.a,{checked:n===l,id:`search-block-tab-${t}-${f}`,key:f,name:"refinement_paths[]",onChange:h,value:null!=b?b:"",transitionFromNext:!!d&&d>n},s)}))})})),Pe=n("JnFx"),Ue=n("6gZm"),qe=n("rjSe"),De=n("WSyx"),Re=n("5FM3"),Be=n("aN7+"),Ve=n("uLgj");function Le({label:e,searchBlocks:t,searchContext:n,flowSteps:o}){var u;const d=Object(s.i)(),p=Object(a.useContext)(De.a),[h,b]=Object(qe.c)(),f=Object(a.useCallback)(()=>b(!0),[]),O=Object(a.useCallback)(()=>b(!1),[]),[g,v]=Object(a.useState)("");Object(Be.a)({schema:c.a},[],h),Object(l.a)(O,{ignoreSearch:p}),Object(Pe.a)("openSearchInputHeader",e=>{e&&(v(e),f())}),Object(a.useEffect)(()=>{h||v("")},[h]),Object(a.useEffect)(()=>{"#DATES"===d.hash&&(v("dates"),f())},[f,d,v]);const S=t.find(e=>!0===(null==e?void 0:e.selected))||t[0];S.selected||Object(he.a)(new Error("Missing selected search block"),{tags:{team:"search-input"}});const m=S.searchInputUnion,j=null==m||null===(u=m.searchInputComponents)||void 0===u?void 0:u.filter(i.a).map(({id:e,littleSearchPlaceholderText:t,littleSearchTextValue:n,title:a,secondaryTextValue:r})=>({id:e||"",label:a||"",placeholder:t||"",value:n===t?void 0:n||void 0,secondaryValue:r||void 0})),E=Object(a.useCallback)(e=>{if(null==j||!j.length)return;const{id:t}=(null!=e?j[e]:j.find(({value:e})=>!e))||j[0];v(t),f(),Object(Ve.a)(t,n)},[f,j,n]);if(null==j||!j.length)return Object(he.a)(new Error("Missing search block input components"),{tags:{team:"search-input"}}),null;const y=!(null==j||!j.some(({value:e})=>!!e));return r.a.createElement(Re.a,{expanded:h,littleSearch:r.a.createElement(Ue.a,{dataTestId:"little-search",fields:y?j:void 0,label:e,onPress:E}),bigSearch:r.a.createElement(we,{flowSteps:o,initialSelectedInputComponentId:g,loggingID:"simpleHeader.bigSearch.header",onSearchBlockSubmit:O,searchBlocks:t.filter(i.a),searchContext:n,shouldLogImpression:h})})}var Ne=n("nBiR"),Ge=n("VJ+F");t.a=Object(v.b)({searchHeader:[m.D,()=>{}],searchContext:[Ne.e,()=>{}]})((function({searchHeader:e,searchContext:t}){var n;const{desktopSearchInputPlaceholderText:a}=e||{},s=null==e||null===(n=e.searchBlocks)||void 0===n?void 0:n.filter(i.a),c=null==e?void 0:e.searchInputFlow;return s?r.a.createElement(Le,{label:a||"",searchBlocks:s,flowSteps:Object(Ge.a)(c),searchContext:t}):null}))}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/7247-50e6d7fe.js.map